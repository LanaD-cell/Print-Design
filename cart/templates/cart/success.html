{% extends base.html %}
{% load static %}

{% block content %}
  <section id="success" class="hidden">
    <h1>Thank you for your purchase!</h1>
    <p>
      We appreciate your business! A confirmation email will be sent to <span id="email"></span>.
    </p>
    <p>
      Your order number is <strong id="order-number"></strong>.
    </p>
    <p>
      You paid a total of <strong id="amount-paid"></strong> EUR for your order.
    </p>
    <p>
      If you have any questions, please email <a href="mailto:orders@example.com">orders@example.com</a>.
    </p>
  </section>

  <!-- Optional: Redirect to user profile or home -->
  <a href="{% url 'profile:profile' %}">Go to your profile</a>

  <script>
    window.onload = function() {
      const email = "{{ user.email }}";
      const orderNumber = "{{ order_number }}";
      const amountPaid = "{{ amount|floatformat:2 }}";

      // Populate the page with the dynamic content
      document.getElementById("email").textContent = email;
      document.getElementById("order-number").textContent = orderNumber;
      document.getElementById("amount-paid").textContent = amountPaid;

      // Show the success message section
      document.getElementById("success").classList.remove("hidden");
    }
  </script>

{% endblock %}
